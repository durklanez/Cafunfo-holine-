<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minha Ordem</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
body{
  font-family:Arial;
  margin:0;
  background:#f2f2f2;
}

#map{
  height:350px;
}

.info{
  padding:15px;
  background:white;
}
</style>
</head>

<body>

<h2 style="text-align:center;">ðŸ“¦ Ordem Enviada</h2>

<div class="info" id="dados"></div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>

let ordem = JSON.parse(localStorage.getItem("ordemAtual"));

if(!ordem){
  document.body.innerHTML = "<h3>Nenhuma ordem encontrada.</h3>";
}

// Mostrar dados
document.getElementById("dados").innerHTML = `
  <h3>${ordem.nome}</h3>
  <p>PreÃ§o: ${ordem.preco}</p>
  <p>Status: Ordem enviada</p>
`;

// Criar mapa
let map = L.map('map').setView([ordem.vendedorLat, ordem.vendedorLon], 14);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

// VENDEDOR ðŸ”´
L.circleMarker([ordem.vendedorLat, ordem.vendedorLon], {
  color: 'red',
  radius:8
}).addTo(map).bindPopup("Vendedor");

// COMPRADOR ðŸŸ¢
navigator.geolocation.getCurrentPosition(function(position){

  let lat = position.coords.latitude;
  let lon = position.coords.longitude;

  L.circleMarker([lat, lon], {
    color: 'green',
    radius:8
  }).addTo(map).bindPopup("VocÃª (Comprador)").openPopup();

});

</script>

</body>
</html>
