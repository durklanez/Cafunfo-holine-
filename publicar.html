<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Publicar Produto</title>

<style>
body{
  font-family:Arial;
  background:#f0f2f5;
  padding:15px;
}

input, textarea{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:8px;
  border:1px solid #ccc;
}

button{
  width:100%;
  padding:12px;
  background:#1877f2;
  color:white;
  border:none;
  border-radius:8px;
}

img{
  width:100%;
  margin-top:10px;
  border-radius:8px;
}
</style>
</head>
<body>

<h2>Publicar Produto</h2>

<input type="file" id="foto">
<input id="nome" placeholder="Nome do produto">
<textarea id="descricao" placeholder="Descrição"></textarea>
<input id="preco" placeholder="Preço">

<button onclick="publicar()">Publicar</button>

<script>

function publicar(){

let user = JSON.parse(localStorage.getItem("user"));
if(!user){
  alert("Faça login novamente.");
  return;
}

let file = document.getElementById("foto").files[0];

if(!file){
  alert("Escolhe uma foto!");
  return;
}

let reader = new FileReader();

reader.onload = function(){

let produtos = JSON.parse(localStorage.getItem("produtos")) || [];

let novo = {
  dono: user.nomeCompleto,
  nome: document.getElementById("nome").value,
  descricao: document.getElementById("descricao").value,
  preco: document.getElementById("preco").value,
  foto: reader.result
};

produtos.push(novo);
localStorage.setItem("produtos", JSON.stringify(produtos));

alert("Produto publicado!");
window.location.href="perfil.html";

};

reader.readAsDataURL(file);

}

</script>

</body>
</html>
