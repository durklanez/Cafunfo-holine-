<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meu Perfil</title>
<style>
body{
  font-family:Arial;
  background:#f1f5f9;
  padding:20px;
  text-align:center;
}

.card{
  background:white;
  padding:20px;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  max-width:400px;
  margin:auto;
}

img{
  width:120px;
  height:120px;
  border-radius:50%;
  object-fit:cover;
  border:3px solid #22c55e;
  margin-bottom:15px;
}

button{
  padding:10px 15px;
  border:none;
  border-radius:8px;
  background:#2563eb;
  color:white;
  margin-top:10px;
  cursor:pointer;
}
</style>
</head>
<body>

<h2>Meu Perfil</h2>

<div class="card" id="perfilBox"></div>

<script>

let user = JSON.parse(localStorage.getItem("user"));

if(!user){
  window.location.href="cadastrar.html";
}

function mostrarPerfil(){

let foto = user.foto ? user.foto : "https://via.placeholder.com/120";

document.getElementById("perfilBox").innerHTML = `
<img src="${foto}">
<h3>${user.nomeCompleto || ""}</h3>

<p><strong>Apelido:</strong> ${user.apelido ? user.apelido : "-"}</p>
<p><strong>Província:</strong> ${user.provincia ? user.provincia : "-"}</p>
<p><strong>Bairro:</strong> ${user.bairro ? user.bairro : "-"}</p>
<p><strong>Data de Nascimento:</strong> ${user.nascimento ? user.nascimento : "-"}</p>
<p><strong>Função:</strong> ${user.funcao ? user.funcao : "-"}</p>

<button onclick="alterarFoto()">Alterar Foto</button>
<button onclick="window.location.href='principal.html'">Seguinte</button>
`;

}

function alterarFoto(){
let input = document.createElement("input");
input.type="file";
input.accept="image/*";

input.onchange = function(e){
let file = e.target.files[0];
let reader = new FileReader();

reader.onload = function(){
user.foto = reader.result;
localStorage.setItem("user", JSON.stringify(user));
mostrarPerfil();
};

reader.readAsDataURL(file);
};

input.click();
}

mostrarPerfil();

</script>

</body>
</html>
